{% extends 'home/index.html' %}

{% load staticfiles %}

{% block head %}
<script src="{% static 'video/videojs/video.min.js' %}"></script>
<script src="{% static 'video/videojs/videojs-contrib-quality-levels.min.js' %}"></script>
<script src="{% static 'video/videojs/videojs-hls-quality-selector.min.js' %}"></script>
<link rel="stylesheet" type="text/css" href="{% static 'video/videojs/video-js.min.css' %}">
<link rel="stylesheet" type="text/css" href="{% static 'video/videojs/videojs-hls-quality-selector.min.css' %}">
<style>
    html, body {
        height: 100%;
    }

    .card {
        height: 100%;
    }

    video-js:fullscreen {
        padding: 0 !important;
    }
</style>
{% endblock %}

{% block main %}
<div class="row my-4">
    <div class="col-md-12">
        <div align="center">
            <video-js id="video" class="vjs-fluid video-js vjs-default-skin vjs-big-play-centered" data-setup={} controls>
            </video-js>
        </div>
    </div>
</div>
<div class="row my-2">
    <div class="col-md-12 my-2">
        <div style="height: auto" class="card text-white bg-primary">
            <div class="card-header">{{ vid.header }}</div>
            <div class="card-body">
                <h4 class="card-title">{{ vid.title }}</h4>
                <ul class="list-group list-group-flush">
                    {# <li class="list-group-item bg-dark">Length: 22:49</li> #}
                    {# <li class="list-group-item bg-dark">Episode No: 1</li> #}
                    <li class="list-group-item bg-dark">
                        {{ vid.description }}
                    </li>
                </ul>
            </div>
        </div>
    </div>
    {% comment %}
    <div class="col-md-4 my-2">
        <div class="card bg-primary border-primary">
            <div class="container">
                {% for i in "xx" %}
                <div class="row my-2">
                    <div class="col-md-12">
                        <div class="card border-primary mb-3">
                            <div class="card-header">Episode - 22:39</div>
                            <div class="card-body">
                                <img src="{{ MEDIA_URL }}video/deathnote.jpg" class="img-fluid"
                                                                              alt="Responsive image">
                            </div>
                        </div>
                    </div>
                </div>
                {% endfor %}
            </div>
        </div>
    </div>
    {% endcomment %}
</div>
<script>
    videojs.options.hls.overrideNative = true;
    player = videojs('video');
    {% if vid %}
        player.src({
            src: "{% url 'getter_file' vid_pk=vid.pk filename=vid.mpd_file %}",
            type: "application/x-mpegURL"
        });

        player.hlsQualitySelector();

        player.play();
    {% endif %}
</script>
{% endblock %}
